-- Toggle Button as TextButton (clickable)
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 40, 0, 20)
toggleButton.Position = UDim2.new(0, 230, 0, 25)
toggleButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
toggleButton.BorderSizePixel = 0
toggleButton.Text = ""
toggleButton.Parent = combatTab

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0,10)
toggleCorner.Parent = toggleButton

-- Circle inside toggle
local toggleCircle = Instance.new("Frame")
toggleCircle.Size = UDim2.new(0,16,0,16)
toggleCircle.Position = UDim2.new(0,2,0,2)
toggleCircle.BackgroundColor3 = Color3.fromRGB(200,0,0)
toggleCircle.Parent = toggleButton

local circleCorner = Instance.new("UICorner")
circleCorner.CornerRadius = UDim.new(0,8)
circleCorner.Parent = toggleCircle

-- ===== Reach logic =====
local reachEnabled = false
local reachSize = 10

local function enableReach(tool)
    if tool:FindFirstChild("Handle") then
        tool.Handle.Size = tool.Handle.Size + Vector3.new(reachSize,reachSize,reachSize)
    end
end

local function disableReach(tool)
    if tool:FindFirstChild("Handle") then
        tool.Handle.Size = tool.Handle.Size - Vector3.new(reachSize,reachSize,reachSize)
    end
end

local function updateReach()
    reachEnabled = not reachEnabled

    -- Move circle & color
    if reachEnabled then
        toggleCircle.Position = UDim2.new(0,22,0,2)
        toggleCircle.BackgroundColor3 = Color3.fromRGB(0,255,0)
    else
        toggleCircle.Position = UDim2.new(0,2,0,2)
        toggleCircle.BackgroundColor3 = Color3.fromRGB(200,0,0)
    end

    -- Apply reach to all tools in backpack
    for _, tool in pairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") then
            if reachEnabled then
                enableReach(tool)
            else
                disableReach(tool)
            end
        end
    end
end

-- Click toggle
toggleButton.MouseButton1Click:Connect(updateReach)

-- Keybind R also toggles
local UserInputService = game:GetService("UserInputService")
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.R then
        updateReach()
    end
end)
