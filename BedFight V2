local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HubUI"
screenGui.Parent = playerGui

-- Main Hub Frame
local hubFrame = Instance.new("Frame")
hubFrame.Size = UDim2.new(0, 400, 0, 300)
hubFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
hubFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
hubFrame.BackgroundTransparency = 0.4
hubFrame.Parent = screenGui

local hubUICorner = Instance.new("UICorner")
hubUICorner.CornerRadius = UDim.new(0,10)
hubUICorner.Parent = hubFrame

-- Tab Buttons Frame
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(1,0,0,40)
tabFrame.Position = UDim2.new(0,0,0,0)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = hubFrame

local function createTabButton(name, positionX)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 100, 1, 0)
    button.Position = UDim2.new(0, positionX, 0, 0)
    button.BackgroundColor3 = Color3.fromRGB(50,50,50)
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.Text = name
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 18
    button.Parent = tabFrame
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,6)
    corner.Parent = button
    return button
end

local mainTabBtn = createTabButton("Main", 10)
local combatTabBtn = createTabButton("Combat", 120)
local miscTabBtn = createTabButton("Misc", 230)

-- Tab Content Frames
local function createTabFrame()
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 1, -50)
    frame.Position = UDim2.new(0, 10, 0, 40)
    frame.BackgroundTransparency = 1
    frame.Parent = hubFrame
    return frame
end

local mainTab = createTabFrame()
local combatTab = createTabFrame()
local miscTab = createTabFrame()

-- Only show active tab
local function switchTab(tab)
    mainTab.Visible = false
    combatTab.Visible = false
    miscTab.Visible = false
    tab.Visible = true
end

switchTab(mainTab) -- default

mainTabBtn.MouseButton1Click:Connect(function() switchTab(mainTab) end)
combatTabBtn.MouseButton1Click:Connect(function() switchTab(combatTab) end)
miscTabBtn.MouseButton1Click:Connect(function() switchTab(miscTab) end)

-- ======= Combat Tab: Reach Toggle =======
local reachLabel = Instance.new("TextLabel")
reachLabel.Size = UDim2.new(0, 200, 0, 30)
reachLabel.Position = UDim2.new(0, 20, 0, 20)
reachLabel.BackgroundTransparency = 1
reachLabel.Text = "Reach"
reachLabel.Font = Enum.Font.SourceSansBold
reachLabel.TextColor3 = Color3.fromRGB(255,255,255)
reachLabel.TextSize = 20
reachLabel.TextXAlignment = Enum.TextXAlignment.Left
reachLabel.Parent = combatTab

-- Toggle Button Frame
local toggleFrame = Instance.new("Frame")
toggleFrame.Size = UDim2.new(0, 40, 0, 20)
toggleFrame.Position = UDim2.new(0, 230, 0, 25)
toggleFrame.BackgroundColor3 = Color3.fromRGB(50,50,50)
toggleFrame.Parent = combatTab

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0,10)
toggleCorner.Parent = toggleFrame

-- Circle inside toggle
local toggleCircle = Instance.new("Frame")
toggleCircle.Size = UDim2.new(0,16,0,16)
toggleCircle.Position = UDim2.new(0,2,0,2)
toggleCircle.BackgroundColor3 = Color3.fromRGB(200,0,0)
toggleCircle.Parent = toggleFrame
local circleCorner = Instance.new("UICorner")
circleCorner.CornerRadius = UDim.new(0,8)
circleCorner.Parent = toggleCircle

-- Reach logic
local reachEnabled = false
local reachSize = 10

local function enableReach(tool)
    if tool:FindFirstChild("Handle") then
        local handle = tool.Handle
        handle.Size = handle.Size + Vector3.new(reachSize, reachSize, reachSize)
    end
end

local function disableReach(tool)
    if tool:FindFirstChild("Handle") then
        local handle = tool.Handle
        handle.Size = handle.Size - Vector3.new(reachSize, reachSize, reachSize)
    end
end

local function updateReach()
    reachEnabled = not reachEnabled
    -- Update circle color
    if reachEnabled then
        toggleCircle.BackgroundColor3 = Color3.fromRGB(0,255,0)
        toggleCircle.Position = UDim2.new(0,22,0,2)
    else
        toggleCircle.BackgroundColor3 = Color3.fromRGB(200,0,0)
        toggleCircle.Position = UDim2.new(0,2,0,2)
    end
    -- Apply to all tools
    for _, tool in pairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") then
            if reachEnabled then
                enableReach(tool)
            else
                disableReach(tool)
            end
        end
    end
end

-- Click toggle
toggleFrame.MouseButton1Click:Connect(updateReach)

-- Keybind R
local UserInputService = game:GetService("UserInputService")
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.R then
        updateReach()
    end
end)
